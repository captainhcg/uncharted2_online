<!DOCTYPE html>
<html>
<head>
<title>Title of the document</title>
</head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="asset/worldmap.js"></script>
<script>
var _height=1080, _width=2158, _tiles=106;
var _map_array=new Array(_height);
for(var i=0;i<_height;i++){
	_map_array[i]=new Array(_width);
}

$(document).ready(function() {
	initMapArray();
	drawMap();
});
function initMapArray(){
	for(var i=0;i<1080;i++){
		var row=worldmap[i]
		var ptr = 0
		for(var ele in row){
			for(var k in row[ele]){
				var v=row[ele][k];
				for(var index=0; index<v; index++){
					_map_array[i][ptr+index]=k;
				}
				ptr+=v;
			}
		}
	}
}
var tilesImage;
function drawMap(){
	tilesImage=document.getElementById("tiles")
	var c=document.getElementById("myCanvas");
	var ctx=c.getContext("2d");
	ctx.drawImage(tilesImage, 0, 0)
	for(var i=0; i<1080; i++){
		for(var j=0; j<2158; j++){
			var imgId = _map_array[i][j]
			ctx.drawImage(tilesImage,(16*(imgId%10)),(Math.floor(imgId/10)*16), 16, 16, j*8, i*8, 8, 8);
		}
	}
}
</script>
<style>
*{ padding: 0px; margin: 0px }
html, body{ width: 100%; height: 100%;}
#tiles{display: none}
</style>
<body>
<img id="tiles" src="asset/tiles.png">
<canvas id="myCanvas" width="17264px" height="8640px"></canvas>
</body>

</html>